<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Executing a simple test</title>
</head>
<body>
<table style="text-align: left; width: 731px; height: 31px;" border="0"
 cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><big style="font-weight: bold;"><big><big>Executing
a simple test<br>
      </big></big></big>___________________________________________________________________________________________________<br>
      <br>
The example is a simple test to verify if some data was put in a DHT.<br>
We used the <a href="http://freepastry.rice.edu/">freepastry</a> DHT
on this test.<br>
      <br>
      <a href="example.html#The_example">A simple test example</a><br>
      <a href="example.html#How_to_execute_the_test_example">How to
execute the simple
test example</a><br>
      <br>
___________________________________________________________________________________________________<br>
      <br>
      <span style="font-weight: bold;"><a name="The_example"></a>The
simple test<br>
      </span><br>
On a system of "n" peers, where a peer inserts "k" values, are all
peers able to retrieve all the inserted values? <br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 149px; height: 215px;" alt=""
 src="../images/example.bmp"><br>
The test has four actions. <br>
In the first action, all peers join the system. <br>
The second action waits for about 16 seconds in order to let the system
stabilize (ie. update routing table). <br>
In the third action, a peer inserts <span style="font-weight: bold;">k</span>
data(string of 10 objects), also storing them in the test case variable
      <span style="font-weight: bold;">V</span>. <br>
      <br>
In the fourth action, all the peers<span style="font-weight: bold;"> </span>try
to retrieve the data, waiting for a maximum time of 16 seconds. <br>
Once <span style="font-weight: bold;">k</span> is retrieved, it is
compared to the data stored in <span style="font-weight: bold;">V</span>
to assign a verdict.<br>
      <br>
      <br>
      <span style="font-weight: bold;"><a
 name="How_to_execute_the_test_example"></a>How to execute the test
example(unix-like)</span><br>
      <br>
We created this example using Freepastry. This example uses the centralized architecture.<br>
      <br>
      <span style="font-weight: bold;">1 - </span>Download and set the
CLASSPATH for peerunit (described in the <a href="install.html">install</a>
page).<br>
      <br>
      <span style="font-weight: bold;">2 - </span>Download <a
 href="http://freepastry.rice.edu/">Freepastry</a> and set the
CLASSPATH. It requires three packages to run:<br>
FreePastry-2.0_02.jar<br>
xpp3-1.1.3.4d_b2.jar<br>
xmlpull_1_1_3_4c.jar<br>
&nbsp;<br>
      <span style="font-weight: bold;">3 - </span>Configure the
tester.properties that should be in the "config/" folder. <br>
This folder must be created in the same folder where you put the
peerunit.jar file.<br>
Here is an example of the <a href="../java/tester.properties">tester.properties</a>
file.<br>
      <br>
To execute this test you just have to change the following
properties:<br>
tester.server=&lt;IP where the coordinator will execute&gt;<br>
tester.logfile=&lt;path and the name for the peerunit logfile&gt;<br>
tester.logfolder=&lt;path to store the logfiles of the peers&gt;<br>
tester.peers=&lt;number of peer that execute the test&gt;<br>
      <br>
      <span style="font-weight: bold;">4 - </span>Start the peerunit
coordinator:<br>
$ java fr.inria.peerunit.rmi.coord.CoordinatorImpl &amp; <br>
      <br>
      <span style="font-weight: bold;">5 - </span>
Starting the bootstrap peer:<br>
$ java freepastry.Bootstrap &amp;<br>
<br>
      <span style="font-weight: bold;">6 - </span>Run the test(each peer will run in a single JVM):
<br>
$ java fr.inria.peerunit.TestRunner freepastry.test.SimpleTest &amp;<br>
      <br>
For instance, if you want to execute with 4 peers(set in tester.peers
property), you can use this simple script:<br>
      <br>
#!/bin/bash<br>
for ((i=0;i&lt;=3;i+=1));<br>
do<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; java
freepastry.test.SimpleTest &amp;<br>
done<br>
      <br>
Obs. Sometimes Freepastry doesn't bootstrap the peers and the verdict
is "inconclusive", so you need to give another try.<br>
      <br>
      <br>
      <span style="font-weight: bold;">The test source code:<br>
      <br>
      </span>Freepastry peer created using its <a
 href="http://freepastry.rice.edu/FreePastry/tutorial/tut_past.html#past">tutorial</a>
(<a href="../java/freepastry/Peer.java">Peer.java</a> , <a href="../java/freepastry/Network.java">Network.java</a> and <a href="../java/freepastry/Bootstrap.java">Bootstrap.java</a>)<br>
Test code (<a href="../java/freepastry/SimpleTest.java">SimpleTest.java</a>)<br>
      <span style="font-weight: bold;"></span> <br>
      <br>
      <a href="../index.html">home</a> <br>
___________________________________________________________________________________________________
      </td>
    </tr>
  </tbody>
</table>
<div style="text-align: justify;"><br>
</div>
</body>
</html>
